This Shiny tool was developed in the context of a research project in 2024. The aim of the project was to analyze the occurrence of different animal groups depending on specific parameters. The core feature of this tool is an interactive map that allows the user to investigate the occurrence of various animal species based on selected parameters.

The project is specifically tailored to me, Roberto Kätker, and may cause errors when used under unforeseen conditions. Due to time constraints, I have not implemented measures to prevent all potential user errors, which is why I am providing this document to briefly explain the structure of the code and address possible issues.

The main.r file serves as the initial sequence. It loads all the required packages and other files. The function.r file contains all custom functions I created, while the plot.r file includes all the plots I use. The shiny.r file contains all the code sequences for the Shiny interface. In the Shiny file, functions from plot.r and function.r are called to visualize the respective contents. However, the functions in function.r and plot.r can also be used independently of the Shiny interface, as all sequences in these files are stored as separate functions, which can be accessed individually.

In the following sections, I will address individual issues and explain certain lines of code, as well as their implications.
Visualization of data from the year 2021:

When data from the year 2021 is added to Visualization I and Visualization III, the results remain unchanged at first. It’s only when all options under the filters "time of day" and "precipitation" are removed that data from 2021 is included. This behavior is due to the functionality of the filter function and the specific nature of the 2021 data. A custom filter function is defined in function.r. This function contains specific parameters for each category (temperature, time of day, month, etc.) that can be filtered and an argument for the dataset to be filtered.

The filter function checks each row of the dataset to see if it contains the passed parameters. If not, the row is removed from the dataset. If no parameters are passed, filtering for that category is skipped. The data from 2021 contains no information on the time of day or precipitation and has a default temperature of -10 degrees, as this data was unfortunately not collected. If the filter is applied to the dataset, and 2021 is selected without excluding the mentioned parameters, the filter function will remove all rows that do not contain those parameters, which includes all the 2021 data. Only when no parameters are selected can the incomplete 2021 data be displayed.

This is also why data is still visualized when all parameters are deselected. If no parameters are selected in a certain category, the filter function ignores that category and does not process the dataset based on it. This approach proved to be more practical while working with the tool.
Additional error sources:

A common error that occurs in Visualization I is when no year is selected. This is due to the structure of the visualization. The year selection is not only relevant to the filter function but also to the visualization itself. Depending on the selected year, a template with either 6 or 8 sectors is provided. If no year is selected, no template can be provided, and thus, no visualization can be displayed.

In Visualization III, the following error can occur: "Replacement has 1 row, data has 0." This means that parameters were selected for which no individuals were observed, and therefore, no visualization can be created. This only affects the pie charts, as the bar charts are generated from a template that defaults to 0 for all possible values and is then modified based on the filtered dataset. No such standardization exists for the pie charts.

---------------------------------------------------------------------------------------------------------------------------------------------------

Das hier vorliegende Shiny-Tool wurde im Rahmen eines Forschungsprojektes im Jahr 2024 erstellt. Ziel des Projekts war es, das Vorkommen einzelner Tiergruppen in Abhängigkeit von bestimmten Parametern zu analysieren. Das Herzstück dieses Tools ist eine interaktive Karte, die es dem Nutzer ermöglicht, das Vorkommen der einzelnen Tierarten in Abhängigkeit von ausgewählten Parametern zu untersuchen.

Das Projekt ist speziell auf mich, Roberto Kätker, zugeschnitten und kann unter nicht vorgesehenen Bedingungen zu Fehlern führen. Aus Zeitgründen habe ich darauf verzichtet, alle möglichen Benutzerfehler abzufangen, weshalb ich in diesem Dokument kurz die Struktur des Codes erläutere und auf mögliche Probleme eingehe.

Die Datei main.r ist die Initialsequenz. Sie enthält alle zusätzlichen Pakete und lädt die weiteren Dateien. Die Datei function.r enthält alle von mir zusätzlich erstellten Funktionen, während die Datei plot.r alle von mir verwendeten Plots beinhaltet. In der Datei shiny.r befinden sich alle Code-Sequenzen für die Shiny-Oberfläche. Innerhalb der Shiny-Datei werden die Funktionen aus plot.r und function.r aufgerufen, um die jeweiligen Inhalte zu visualisieren. Die Funktionen in function.r und plot.r können jedoch auch unabhängig von der Shiny-Oberfläche genutzt werden, da alle Sequenzen in diesen Dateien jeweils als separate Funktionen gespeichert sind und somit einzeln abgerufen werden können.

Im Folgenden werde ich auf Einzelprobleme eingehen und nach und nach einige Codezeilen erklären sowie ihre Implikationen erläutern.
Visualisierung der Daten aus dem Jahr 2021:

Werden in Visualisierung I und Visualisierung III Daten aus dem Jahr 2021 hinzugefügt, ändert sich zunächst nichts an den Ergebnissen. Erst wenn alle Optionen bei den Filtern "Tageszeit" und "Niederschlag" entfernt werden, werden die Daten aus dem Jahr 2021 einbezogen. Dies liegt an der Funktionsweise der Filterfunktion sowie an den Besonderheiten der Daten aus 2021. In der Datei function.r ist eine eigene Filterfunktion definiert. Diese enthält spezifische Parameter für jede Kategorie (Temperatur, Tageszeit, Monat etc.), nach denen gefiltert werden kann, sowie einen Platz für den zu filternden Datensatz.

Die Filterfunktion prüft jede Zeile des Datensatzes, ob sie die übergebenen Parameter enthält. Wenn nicht, wird die Zeile aus dem Datensatz entfernt. Sind keine Parameter übergeben, wird in der entsprechenden Kategorie nicht gefiltert. Die Daten aus dem Jahr 2021 enthalten keine Informationen zur Tageszeit und zum Niederschlag und haben standardmäßig die Temperatur -10 Grad, da diese Daten leider nicht erhoben wurden. Wenn der Filter nun auf den Datensatz angewendet wird und das Jahr 2021 ausgewählt ist, jedoch nicht die oben genannten Parameter herausgenommen werden, entfernt die Filterfunktion alle Zeilen, die die Parameter nicht enthalten – was alle Daten aus 2021 betrifft. Nur wenn kein Parameter ausgewählt wurde, können die unvollständigen Daten korrekt abgebildet werden.

Dies ist auch der Grund, warum weiterhin Daten visualisiert werden, wenn alle Parameter abgewählt werden. Sind keine Parameter in einer bestimmten Kategorie ausgewählt, ignoriert die Filterfunktion diese Kategorie und bearbeitet den Datensatz nicht auf Basis dieser Kategorie. Diese Vorgehensweise hat sich in der Arbeit mit dem Tool als praktikabel erwiesen.
Weitere Fehlerquellen:

Ein häufiger auftretender Fehler in Visualisierung I ist, wenn kein Jahr ausgewählt wird. Dies liegt an der Struktur der Visualisierung. Die Auswahl des Jahres ist nicht nur für die Filterfunktion relevant, sondern auch für die Visualisierung selbst. Abhängig vom ausgewählten Jahr wird eine Vorlage mit 6 oder 8 Sektoren bereitgestellt. Ist kein Jahr ausgewählt, kann keine Vorlage bereitgestellt werden, und es kann keine Abbildung visualisiert werden.

In Visualisierung III kann folgender Fehler auftreten: "Ersetzung hat 1 Zeile, Daten haben 0." Dies bedeutet, dass Parameter ausgewählt wurden, bei denen keine Individuen gesichtet wurden und folglich keine Abbildungen erstellt werden können. Dies betrifft nur die Kreisdiagramme, da die Säulendiagramme aus einer Vorlage erstellt werden, die standardmäßig für alle möglichen Ausprägungen 0 annimmt und dann basierend auf dem gefilterten Datensatz angepasst wird. Für die Kreisdiagramme existiert keine solche Standardisierung
